<header>
    <div>
        <a href="/products" class="btn btn-primary">Tienda</a>
        <a href="/api/users/current" class="btn btn-secondary">Perfil</a>
    </div>
</header>

<h2>Carrito</h2>
<h3>N° de Carrito: {{cartId}}</h3>



    {{#if productos.length}}
        <ul>
        {{#each productos}}
            <li class="product-item">
                <div class="product-details">
                    <p class="product-title">Producto: {{this.product.title}}</p>
                    <p>Cantidad: {{this.quantity}} | Precio unitario: ${{this.product.price}}</p>
                    <p class="product-subtotal">Subtotal: ${{this.product.totalPrice}}</p>
                </div>
                <button onclick="deleteProductFromCart('{{this.cartId}}', '{{this.productId}}')" class="btn btn-danger">Eliminar</button>
            </li>
        {{/each}}
        </ul>
        <div class="total-section">
            <button onclick="vaciarCarrito('{{cartId}}')" class="btn btn-danger">Vaciar Carrito</button>
            <h3 class="total-price">Total de la compra: ${{totalPurchase}}</h3>
        </div>

        <form method="post" action="/api/carts/{{cartId}}/purchase">
            <button type="submit" class="btn btn-success">Finalizar Compra</button>
        </form>

    {{else}}
        <h2>Carrito vacío</h2>
        <a href="/products">Agregar productos al carrito</a>
    {{/if}}

<script src="../js/cart.js"></script>
